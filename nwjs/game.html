<html>
<head>
	<title>My first Three.js app</title>
	<style>
		body { margin: 0; } 
		canvas { width: 100%; height: 100% } 
	</style> 
</head> 
<body> 
	<script src="components/three.js/three.min.js"></script> 
	<script src="components/objloader.js"></script> 
	<script>
		var scene = new THREE.Scene();
		var camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 0.1, 1000 );
		var renderer = new THREE.WebGLRenderer();
		renderer.setSize( window.innerWidth, window.innerHeight ); 
		document.body.appendChild( renderer.domElement );
		
		function Cubes() {
			this.items = [];
		}
		
		Cubes.prototype.add = function(cube) {
			this.items.push(cube);
		}
		
		Cubes.prototype.rotate = function() {
			for(var i = 0; i < this.items.length; i++) {
			
				this.items[i].rotation.x += 0.01;
			}
		}
		
		var cubes = new Cubes();
		
		function drawCube() {
			var geometry = new THREE.BoxGeometry( 1, 1, 1 ); 
			var material = new THREE.MeshBasicMaterial( { color: 0x00ff00 } );
			var cube = new THREE.Mesh( geometry, material );
			scene.add( cube );
			return cube;
		}
		
		//cubes.add(drawCube())
		//drawCube();
		
		// prepare loader and load the model
		var gr;
		var oLoader = new THREE.OBJLoader();
		oLoader.load('model/hg.obj', function(object, materials) {
			// var material = new THREE.MeshFaceMaterial(materials);
			var material2 = new THREE.MeshBasicMaterial( { color: 0x00ff00 } );
			object.traverse( function(child) {
			if (child instanceof THREE.Mesh) {
					// apply custom material
				  child.material = material2;
				  // enable casting shadows
				  child.castShadow = true;
				  child.receiveShadow = true;
				}
			});
			object.position.x = 0;
			object.position.y = 0;
			object.position.z = 0;
			object.scale.set(1, 1, 1);
			scene.add(object);
			gr = object;
		});

		

		camera.position.z = 10;
		
		function render() { 
			requestAnimationFrame( render ); 
			
			cubes.rotate();
			gr.rotation.y += 0.01;
			//cube.rotation.x += 0.01; 
			//cube.rotation.y += 0.1;
			
			renderer.render( scene, camera ); 
		} 
		render();
	</script> 
</body> 
</html>